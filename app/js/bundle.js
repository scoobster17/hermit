(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';var _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},_formHandling=require('./utils/form-handling'),_plugins=require('./configurations/plugins.js'),_user=require('./configurations/user.js'),_tabHandling=require('./tabs/tab-handling'),getDOMElements=function(){return{preconfiguredTabsContainer:document.getElementById('pre-configured-tabs'),preconfiguredTabs:document.getElementById('pre-configured-tabs-list'),tabList:document.getElementById('hermit-nav'),tabContentContainer:document.getElementById('tab-content-container'),dynamicTabsContentContainer:document.getElementById('dynamic-tabs-content-container'),addNewSiteSection:document.getElementById('add-new-site'),newTabForm:document.getElementById('new-tab-form')}},bindAddTabFormSubmit=function(a){a.newTabForm.addEventListener('submit',function(b){b.preventDefault();var c=(0,_formHandling.serializeForm)(b.target),d=a.tabList.querySelectorAll('a'),e=a.tabContentContainer.querySelectorAll('.tab');return c.id='hermit-'+new Date().getTime(),d.forEach(function(a){a.removeAttribute('aria-selected')}),e.forEach(function(a){a.setAttribute('aria-hidden','true')}),(0,_tabHandling.createTabs)([_extends({},c,{showTab:!0})],a),(0,_tabHandling.bindTabTriggers)(),(0,_user.updateUserSettings)(c),!1})},init=function(){var a=getDOMElements();bindAddTabFormSubmit(a),(0,_user.getUserSettings)(a),(0,_plugins.getPreconfiguredTabs)(a)};window.addEventListener('load',init);

},{"./configurations/plugins.js":2,"./configurations/user.js":3,"./tabs/tab-handling":4,"./utils/form-handling":5}],2:[function(require,module,exports){
'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var elems={},getPreconfiguredTabs=exports.getPreconfiguredTabs=function(a){elems=a,fetch('/pre-configured-tabs').then(function(a){if(a.ok)return a.json();throw new Error('There was an error fetching pre-configured tabs')}).then(function(a){return addPreconfiguredSiteButtons(a,elems)}).catch(function(a){console.error(a),elems.preconfiguredTabsContainer.setAttribute('aria-hidden','true')})},addPreconfiguredSiteButtons=function(a){var b='';a.forEach(function(a){b+=['<li>','<button ','data-name="'+a.name+'" ','data-site="'+a.site+'" ','data-url="'+a.url+'" ','>',a.name,'<img src="img/service/'+a.name.toLowerCase()+'/'+a.logo+'" alt="" />','</button>','</li>'].join('')}),elems.preconfiguredTabs.innerHTML=b;var c=elems.preconfiguredTabs.getElementsByTagName('button'),d=function(a){a.addEventListener('click',function(){for(var b in a.dataset){var c=document.getElementById(b);c&&(c.value=a.dataset[b])}elems.addNewSiteSection.scrollIntoView()})},e=!0,f=!1,g=void 0;try{for(var h,i,j=c[Symbol.iterator]();!(e=(h=j.next()).done);e=!0)i=h.value,d(i)}catch(a){f=!0,g=a}finally{try{!e&&j.return&&j.return()}finally{if(f)throw g}}};

},{}],3:[function(require,module,exports){
'use strict';Object.defineProperty(exports,'__esModule',{value:!0}),exports.updateUserSettings=exports.getUserSettings=void 0;var _tabHandling=require('../tabs/tab-handling'),elems={},getUserSettings=exports.getUserSettings=function(a){elems=a,fetch('/user/settings/get').then(function(a){if(a.ok)return a.json();throw new Error('There was an error fetching the user\'s settings')}).then(function(a){var b=JSON.parse(a.data);b&&(b.forEach(function(a){a.showTab=!1}),(0,_tabHandling.createTabs)(b,elems),(0,_tabHandling.bindTabTriggers)())}).catch(console.error)},updateUserSettings=exports.updateUserSettings=function(a){fetch('/user/settings/set',{method:'POST',headers:{"Content-Type":'application/json'},body:JSON.stringify(a)}).then(function(a){if(a.ok)return a.json();throw new Error('There was an error updating user settings')}).catch(console.error)};

},{"../tabs/tab-handling":4}],4:[function(require,module,exports){
'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var elems={},createTabs=exports.createTabs=function(a,b){elems=b;var c='',d='';a.forEach(function(a){c+=['<li>','<a ','href="#'+a.id+'" ','id="tab-'+a.name+'" ','role="tab" ','aria-controls="'+a.id+'" ',''+(a.showTab?'aria-selected="true" ':''),'>',a.name,'</a>','</li>'].join(''),d+=['<div ','id="'+a.id+'" ','class="tab" ','role="tabpanel" ','aria-labelledby="tab-'+a.name+'" ',''+(a.showTab?'':'aria-hidden="true" '),'>','<webview ','id="'+a.id+'-webview" ','src="'+a.url+'" ','partition="persist:'+a.name+'"','>','</webview>','</div>'].join('')}),elems.tabList.innerHTML+=c,elems.dynamicTabsContentContainer.innerHTML+=d;var f=document.querySelectorAll('webview')[1];f.addEventListener('did-get-redirect-request',function(a){setTimeout(function(){f.executeJavaScript(['window.onbeforeunload = function(event){','console.log(event);','return \'Are you sure you want to leave?\';','};','window.location = \''+a.newURL+'\';'].join(''))},10),a.preventDefault()})},bindTabTriggers=exports.bindTabTriggers=function(){var a=elems.tabList.querySelectorAll('a'),b=elems.tabContentContainer.querySelectorAll('.tab');a.forEach(function(c){c.addEventListener('click',function(c){c.preventDefault();var d=document.getElementById(c.target.getAttribute('href').slice(1));a.forEach(function(a){a.removeAttribute('aria-selected')}),c.target.setAttribute('aria-selected','true'),b.forEach(function(a){a.setAttribute('aria-hidden','true')}),d.removeAttribute('aria-hidden')})})};

},{}],5:[function(require,module,exports){
'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var serializeForm=exports.serializeForm=function(a){var b={},c=a.querySelectorAll('input[type="text"]');return c.forEach(function(a){b[a.name]=a.value}),b};

},{}]},{},[1]);
